---
layout: post
title: "Is SQL the barrier to continuous deployment?"
comments: true
---
<p>When it comes to the step between continuous delivery and continuous deployment (automated release of <strong>every</strong> good build), then the barrier I hear most often is <em>automated deployments work fine until we have database changes.</em></p>
<p>Can we be confident in saying that database deployments are the only barrier to continuous deployment? Probably not the only barrier, but there are a large part of the puzzle. There will be other factors, e.g. audit regulations regarding sign off of releases etc., but I don&rsquo;t think I would be frowned upon by agreeing with this statement.</p>
<p>I know there are many great tools out there will will help us overcome sql changes. Redgate&rsquo;s <a href="http://www.red-gate.com/products/sql-development/sql-compare/" target="_blank">Sql Compare</a> can take 2 schemas and compare them to create a change script and a rollback script. This can be controlled by a CI tool. Others do a similar job, but Sql Compare is one I use regularly. Sql Server management studio can also be manipulated very easily via msbuild. So I can assure you it is <strong>very easy</strong> to automate sql deployments. But it scares a lot of people as they are worried they will kill their database. This is not a fear that is uncalled for if I am truthful.</p>
<p>Since there is the fear of damaging the database, some companies who are already doing continuous deployment will actively &lsquo;skip&rsquo; a deployment when sql changes are involved. This involves using VCS hooks. A typical hook would be the presence of a commit message, e.g. #Skip Deployment. This would then let source control / CI server know to handle the commit without the need for a deployment.</p>
<p>Back in late 2010, I was introduced to the concept of NoSQL databases. This is essentially any type of store that doe not use a relational model. I have been looking at NoSQL more and more and have recently pondered &lsquo;how easy would NoSQL based systems be to include in a continuous deployment system&rsquo;?</p>
<p>I <span style="text-decoration: underline;">thought</span> the answer was that NoSQL <strong>was</strong> indeed the missing piece of the continuous deployment puzzle. If companies were only ever deploying code then that&rsquo;s easy right? Things are never that easy though. I looked further and then thought that if data was held in a store (of any kind) in a specific structure then how could we retrieve that data if the structure changed with the next system deployment.</p>
<p>I asked <a href="http://twitter.com/robashton" target="_blank">Rob Ashton</a>, a well know presenter of <a href="http://ravendb.net/" target="_blank">Raven DB</a>, this question. Rob said that it wouldn&rsquo;t work unless you ran some sort of data migration against the data structures or versioned them in some way. So, in essence it was a no! I&rsquo;m not disagreeing with Rob by any means but I still think NoSQL systems have got scope built in to allow us to handle automated deployments a little easier. As part of our development task, we could write the migration scripts for the data. We would have to do this anyway if we worked in a sql world. I&rsquo;m a coder, not a sql developer. Therefore I would be a lot happier writing code migrations rather than sql migrations. This means I would also be a lot happier about deployments where only code changes were involved.</p>
<p>I have not had time to try this approach as I am not skilled by any means in using NoSQL. So in essence, this is a theory but I am confident it has some wheels. What do you think?&hellip;&hellip;&hellip;</p>
